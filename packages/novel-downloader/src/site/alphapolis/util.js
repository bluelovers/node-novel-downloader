"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const url_1 = require("../../util/url");
function check(url, options) {
    return /alphapolis/i.test(url_1.default(url).hostname || '');
}
exports.check = check;
function makeUrl(urlobj, bool, ...argv) {
    let url;
    let cid = (!bool && urlobj.chapter_id) ? `episode\/${urlobj.chapter_id}` : '';
    url = `https://www.alphapolis.co.jp/novel/${urlobj.novel_pid}/${urlobj.novel_id}/${cid}`;
    return url_1.default(url);
}
exports.makeUrl = makeUrl;
function parseUrl(_url, ...argv) {
    const { urlobj, url } = url_1._handleParseURL(_url, ...argv);
    let r;
    let m;
    r = /alphapolis\.co\.jp\/novel\/([^\/]+)\/([^\/]+)(?:\/episode\/([^\/]+))?/;
    m = r.exec(url);
    if (!m) {
        r = /novel\/([^\/]+)\/([^\/]+)(?:\/episode\/([^\/]+))?/;
        m = r.exec(url);
    }
    if (m) {
        urlobj.novel_pid = m[1];
        urlobj.novel_id = m[2];
        urlobj.chapter_id = m[3];
        return urlobj;
    }
    return urlobj;
}
exports.parseUrl = parseUrl;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSx3Q0FBOEU7QUFFOUUsU0FBZ0IsS0FBSyxDQUFDLEdBQXVDLEVBQUUsT0FBUTtJQUV0RSxPQUFPLGFBQWEsQ0FBQyxJQUFJLENBQUMsYUFBUyxDQUFDLEdBQVUsQ0FBQyxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUNqRSxDQUFDO0FBSEQsc0JBR0M7QUFFRCxTQUFnQixPQUFPLENBQUMsTUFBMkIsRUFBRSxJQUF3QixFQUFFLEdBQUcsSUFBSTtJQUVyRixJQUFJLEdBQVcsQ0FBQztJQUVoQixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUU5RSxHQUFHLEdBQUcsc0NBQXNDLE1BQU0sQ0FBQyxTQUFTLElBQUksTUFBTSxDQUFDLFFBQVEsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUV6RixPQUFPLGFBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN2QixDQUFDO0FBVEQsMEJBU0M7QUFFRCxTQUFnQixRQUFRLENBQUMsSUFBMkIsRUFBRSxHQUFHLElBQUk7SUFFNUQsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxxQkFBZSxDQUFDLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO0lBRXZELElBQUksQ0FBUyxDQUFDO0lBQ2QsSUFBSSxDQUFrQixDQUFDO0lBRXZCLENBQUMsR0FBRyx1RUFBdUUsQ0FBQztJQUM1RSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFhLENBQUMsQ0FBQztJQUUxQixJQUFJLENBQUMsQ0FBQyxFQUNOO1FBQ0MsQ0FBQyxHQUFHLG1EQUFtRCxDQUFDO1FBQ3hELENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQWEsQ0FBQyxDQUFBO0tBQ3pCO0lBRUQsSUFBSSxDQUFDLEVBQ0w7UUFDQyxNQUFNLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QixNQUFNLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QixNQUFNLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV6QixPQUFPLE1BQU0sQ0FBQztLQUNkO0lBRUQsT0FBTyxNQUFNLENBQUM7QUFDZixDQUFDO0FBMUJELDRCQTBCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIE5vdmVsU2l0ZSBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgY3JlYXRlVVJMLCB7IF9oYW5kbGVQYXJzZVVSTCwgSVBhcnNlVXJsUnVudGltZSB9IGZyb20gJy4uLy4uL3V0aWwvdXJsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrKHVybDogc3RyaW5nIHwgVVJMIHwgTm92ZWxTaXRlLklQYXJzZVVybCwgb3B0aW9ucz8pOiBib29sZWFuXG57XG5cdHJldHVybiAvYWxwaGFwb2xpcy9pLnRlc3QoY3JlYXRlVVJMKHVybCBhcyBhbnkpLmhvc3RuYW1lIHx8ICcnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VVcmwodXJsb2JqOiBOb3ZlbFNpdGUuSVBhcnNlVXJsLCBib29sID86IGJvb2xlYW4gfCBudW1iZXIsIC4uLmFyZ3YpXG57XG5cdGxldCB1cmw6IHN0cmluZztcblxuXHRsZXQgY2lkID0gKCFib29sICYmIHVybG9iai5jaGFwdGVyX2lkKSA/IGBlcGlzb2RlXFwvJHt1cmxvYmouY2hhcHRlcl9pZH1gIDogJyc7XG5cblx0dXJsID0gYGh0dHBzOi8vd3d3LmFscGhhcG9saXMuY28uanAvbm92ZWwvJHt1cmxvYmoubm92ZWxfcGlkfS8ke3VybG9iai5ub3ZlbF9pZH0vJHtjaWR9YDtcblxuXHRyZXR1cm4gY3JlYXRlVVJMKHVybCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVybChfdXJsOiBzdHJpbmcgfCBVUkwgfCBudW1iZXIsIC4uLmFyZ3YpXG57XG5cdGNvbnN0IHsgdXJsb2JqLCB1cmwgfSA9IF9oYW5kbGVQYXJzZVVSTChfdXJsLCAuLi5hcmd2KTtcblxuXHRsZXQgcjogUmVnRXhwO1xuXHRsZXQgbTogUmVnRXhwRXhlY0FycmF5O1xuXG5cdHIgPSAvYWxwaGFwb2xpc1xcLmNvXFwuanBcXC9ub3ZlbFxcLyhbXlxcL10rKVxcLyhbXlxcL10rKSg/OlxcL2VwaXNvZGVcXC8oW15cXC9dKykpPy87XG5cdG0gPSByLmV4ZWModXJsIGFzIHN0cmluZyk7XG5cblx0aWYgKCFtKVxuXHR7XG5cdFx0ciA9IC9ub3ZlbFxcLyhbXlxcL10rKVxcLyhbXlxcL10rKSg/OlxcL2VwaXNvZGVcXC8oW15cXC9dKykpPy87XG5cdFx0bSA9IHIuZXhlYyh1cmwgYXMgc3RyaW5nKVxuXHR9XG5cblx0aWYgKG0pXG5cdHtcblx0XHR1cmxvYmoubm92ZWxfcGlkID0gbVsxXTtcblx0XHR1cmxvYmoubm92ZWxfaWQgPSBtWzJdO1xuXHRcdHVybG9iai5jaGFwdGVyX2lkID0gbVszXTtcblxuXHRcdHJldHVybiB1cmxvYmo7XG5cdH1cblxuXHRyZXR1cm4gdXJsb2JqO1xufVxuIl19