"use strict";
/**
 * Created by user on 2018/3/18/018.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.getOptions = exports.createOptionsJSDOM = exports.defaultJSDOMOptions = exports.LazyCookieJar = exports.LazyCookie = exports.VirtualConsole = void 0;
const jsdom_extra_1 = require("jsdom-extra");
Object.defineProperty(exports, "VirtualConsole", { enumerable: true, get: function () { return jsdom_extra_1.VirtualConsole; } });
const jsdom_extra_2 = require("jsdom-extra");
Object.defineProperty(exports, "LazyCookie", { enumerable: true, get: function () { return jsdom_extra_2.LazyCookie; } });
Object.defineProperty(exports, "LazyCookieJar", { enumerable: true, get: function () { return jsdom_extra_2.LazyCookieJar; } });
const jsdom_extra_3 = require("jsdom-extra");
const from_url_1 = require("jsdom-extra/lib/from-url");
exports.defaultJSDOMOptions = {
    //virtualConsole: new VirtualConsole,
    //runScripts: 'dangerously',
    disableCheerio: true,
    minifyHTML: true,
};
function createOptionsJSDOM(options = {}, ...opts) {
    options = Object.assign({}, exports.defaultJSDOMOptions, options, ...opts);
    // @ts-ignore
    options.cookieJar = options.cookieJar || new jsdom_extra_2.LazyCookieJar();
    return options;
}
exports.createOptionsJSDOM = createOptionsJSDOM;
function getOptions(options) {
    let opts = jsdom_extra_3.packOptions(options.optionsJSDOM || options);
    let fromURLOptions = from_url_1.normalizeFromURLOptions(opts);
    let requestOptions = from_url_1.normalizeRequestOptions(fromURLOptions);
    return {
        options: opts,
        fromURLOptions,
        requestOptions,
    };
}
exports.getOptions = getOptions;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianNkb20uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJqc2RvbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7OztBQUVILDZDQUF1RztBQUc3RSwrRkFIUSw0QkFBYyxPQUdSO0FBRXhDLDZDQUF3RDtBQUMvQywyRkFEQSx3QkFBVSxPQUNBO0FBQUUsOEZBREEsMkJBQWEsT0FDQTtBQUVsQyw2Q0FBeUY7QUFDekYsdURBQTZHO0FBSWhHLFFBQUEsbUJBQW1CLEdBQW9CO0lBQ25ELHFDQUFxQztJQUNyQyw0QkFBNEI7SUFDNUIsY0FBYyxFQUFFLElBQUk7SUFDcEIsVUFBVSxFQUFFLElBQUk7Q0FDaEIsQ0FBQztBQUVGLFNBQWdCLGtCQUFrQixDQUF5QixVQUEyQyxFQUFFLEVBQUUsR0FBRyxJQUEwQjtJQUV0SSxPQUFPLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsMkJBQW1CLEVBQUUsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDbkUsYUFBYTtJQUNiLE9BQU8sQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLFNBQVMsSUFBSSxJQUFJLDJCQUFhLEVBQUUsQ0FBQztJQUU3RCxPQUFPLE9BQU8sQ0FBQztBQUNoQixDQUFDO0FBUEQsZ0RBT0M7QUFFRCxTQUFnQixVQUFVLENBQUMsT0FBTztJQUVqQyxJQUFJLElBQUksR0FBRyx5QkFBWSxDQUFDLE9BQU8sQ0FBQyxZQUFZLElBQUksT0FBTyxDQUFDLENBQUM7SUFFekQsSUFBSSxjQUFjLEdBQUcsa0NBQXVCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbkQsSUFBSSxjQUFjLEdBQUcsa0NBQXVCLENBQUMsY0FBYyxDQUFDLENBQUM7SUFFN0QsT0FBTztRQUNOLE9BQU8sRUFBRSxJQUFJO1FBQ2IsY0FBYztRQUNkLGNBQWM7S0FDZCxDQUFBO0FBQ0YsQ0FBQztBQVpELGdDQVlDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gMjAxOC8zLzE4LzAxOC5cbiAqL1xuXG5pbXBvcnQgX2pzZG9tLCB7IElGcm9tVXJsT3B0aW9ucywgVmlydHVhbENvbnNvbGUsIElPcHRpb25zSlNET00sIElGcm9tRmlsZU9wdGlvbnMgfSBmcm9tICdqc2RvbS1leHRyYSc7XG5cbmltcG9ydCBOb3ZlbFNpdGUgZnJvbSAnLi9zaXRlL2luZGV4JztcbmV4cG9ydCB7IElGcm9tVXJsT3B0aW9ucywgVmlydHVhbENvbnNvbGUsIElPcHRpb25zSlNET00sIElGcm9tRmlsZU9wdGlvbnMgfVxuXG5pbXBvcnQgeyBMYXp5Q29va2llLCBMYXp5Q29va2llSmFyIH0gZnJvbSAnanNkb20tZXh0cmEnO1xuZXhwb3J0IHsgTGF6eUNvb2tpZSwgTGF6eUNvb2tpZUphciB9XG5cbmltcG9ydCB7IHBhY2tPcHRpb25zIGFzIF9wYWNrT3B0aW9ucywgSU9wdGlvbnMsIElPcHRpb25zQ3JlYXRlUXVlcnkgfSBmcm9tICdqc2RvbS1leHRyYSc7XG5pbXBvcnQgeyBub3JtYWxpemVGcm9tVVJMT3B0aW9ucywgbm9ybWFsaXplUmVxdWVzdE9wdGlvbnMsIElSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJ2pzZG9tLWV4dHJhL2xpYi9mcm9tLXVybCc7XG5cbmV4cG9ydCB0eXBlIElOb3ZlbE9wdGlvbnNKU0RPTSA9IElGcm9tVXJsT3B0aW9ucyAmIElPcHRpb25zSlNET007XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0SlNET01PcHRpb25zOiBJRnJvbVVybE9wdGlvbnMgPSB7XG5cdC8vdmlydHVhbENvbnNvbGU6IG5ldyBWaXJ0dWFsQ29uc29sZSxcblx0Ly9ydW5TY3JpcHRzOiAnZGFuZ2Vyb3VzbHknLFxuXHRkaXNhYmxlQ2hlZXJpbzogdHJ1ZSxcblx0bWluaWZ5SFRNTDogdHJ1ZSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPcHRpb25zSlNET008VCA9IElOb3ZlbE9wdGlvbnNKU0RPTT4ob3B0aW9uczogUGFydGlhbDxUICYgSU5vdmVsT3B0aW9uc0pTRE9NPiA9IHt9LCAuLi5vcHRzOiBJTm92ZWxPcHRpb25zSlNET01bXSk6IFBhcnRpYWw8VCAmIElOb3ZlbE9wdGlvbnNKU0RPTT5cbntcblx0b3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRKU0RPTU9wdGlvbnMsIG9wdGlvbnMsIC4uLm9wdHMpO1xuXHQvLyBAdHMtaWdub3JlXG5cdG9wdGlvbnMuY29va2llSmFyID0gb3B0aW9ucy5jb29raWVKYXIgfHwgbmV3IExhenlDb29raWVKYXIoKTtcblxuXHRyZXR1cm4gb3B0aW9ucztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGlvbnMob3B0aW9ucylcbntcblx0bGV0IG9wdHMgPSBfcGFja09wdGlvbnMob3B0aW9ucy5vcHRpb25zSlNET00gfHwgb3B0aW9ucyk7XG5cblx0bGV0IGZyb21VUkxPcHRpb25zID0gbm9ybWFsaXplRnJvbVVSTE9wdGlvbnMob3B0cyk7XG5cdGxldCByZXF1ZXN0T3B0aW9ucyA9IG5vcm1hbGl6ZVJlcXVlc3RPcHRpb25zKGZyb21VUkxPcHRpb25zKTtcblxuXHRyZXR1cm4ge1xuXHRcdG9wdGlvbnM6IG9wdHMsXG5cdFx0ZnJvbVVSTE9wdGlvbnMsXG5cdFx0cmVxdWVzdE9wdGlvbnMsXG5cdH1cbn1cbiJdfQ==