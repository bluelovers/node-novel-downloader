"use strict";
/**
 * Created by user on 2018/3/18/018.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const jsdom_extra_1 = require("jsdom-extra");
exports.VirtualConsole = jsdom_extra_1.VirtualConsole;
const jsdom_extra_2 = require("jsdom-extra");
exports.LazyCookie = jsdom_extra_2.LazyCookie;
exports.LazyCookieJar = jsdom_extra_2.LazyCookieJar;
const jsdom_extra_3 = require("jsdom-extra");
const from_url_1 = require("jsdom-extra/lib/from-url");
exports.defaultJSDOMOptions = {
    //virtualConsole: new VirtualConsole,
    //runScripts: 'dangerously',
    disableCheerio: true,
    minifyHTML: true,
};
function createOptionsJSDOM(options = {}, ...opts) {
    options = Object.assign({}, exports.defaultJSDOMOptions, options, ...opts);
    // @ts-ignore
    options.cookieJar = options.cookieJar || new jsdom_extra_2.LazyCookieJar();
    return options;
}
exports.createOptionsJSDOM = createOptionsJSDOM;
function getOptions(options) {
    let opts = jsdom_extra_3.packOptions(options.optionsJSDOM || options);
    let fromURLOptions = from_url_1.normalizeFromURLOptions(opts);
    let requestOptions = from_url_1.normalizeRequestOptions(fromURLOptions);
    return {
        options: opts,
        fromURLOptions,
        requestOptions,
    };
}
exports.getOptions = getOptions;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianNkb20uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJqc2RvbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBRUgsNkNBQXVHO0FBRzdFLHlCQUhRLDRCQUFjLENBR1I7QUFFeEMsNkNBQXdEO0FBQy9DLHFCQURBLHdCQUFVLENBQ0E7QUFBRSx3QkFEQSwyQkFBYSxDQUNBO0FBRWxDLDZDQUF5RjtBQUN6Rix1REFBNkc7QUFJaEcsUUFBQSxtQkFBbUIsR0FBb0I7SUFDbkQscUNBQXFDO0lBQ3JDLDRCQUE0QjtJQUM1QixjQUFjLEVBQUUsSUFBSTtJQUNwQixVQUFVLEVBQUUsSUFBSTtDQUNoQixDQUFDO0FBRUYsU0FBZ0Isa0JBQWtCLENBQXlCLFVBQTJDLEVBQUUsRUFBRSxHQUFHLElBQTBCO0lBRXRJLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSwyQkFBbUIsRUFBRSxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUNuRSxhQUFhO0lBQ2IsT0FBTyxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsU0FBUyxJQUFJLElBQUksMkJBQWEsRUFBRSxDQUFDO0lBRTdELE9BQU8sT0FBTyxDQUFDO0FBQ2hCLENBQUM7QUFQRCxnREFPQztBQUVELFNBQWdCLFVBQVUsQ0FBQyxPQUFPO0lBRWpDLElBQUksSUFBSSxHQUFHLHlCQUFZLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxPQUFPLENBQUMsQ0FBQztJQUV6RCxJQUFJLGNBQWMsR0FBRyxrQ0FBdUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuRCxJQUFJLGNBQWMsR0FBRyxrQ0FBdUIsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUU3RCxPQUFPO1FBQ04sT0FBTyxFQUFFLElBQUk7UUFDYixjQUFjO1FBQ2QsY0FBYztLQUNkLENBQUE7QUFDRixDQUFDO0FBWkQsZ0NBWUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE4LzMvMTgvMDE4LlxuICovXG5cbmltcG9ydCBfanNkb20sIHsgSUZyb21VcmxPcHRpb25zLCBWaXJ0dWFsQ29uc29sZSwgSU9wdGlvbnNKU0RPTSwgSUZyb21GaWxlT3B0aW9ucyB9IGZyb20gJ2pzZG9tLWV4dHJhJztcblxuaW1wb3J0IE5vdmVsU2l0ZSBmcm9tICcuL3NpdGUvaW5kZXgnO1xuZXhwb3J0IHsgSUZyb21VcmxPcHRpb25zLCBWaXJ0dWFsQ29uc29sZSwgSU9wdGlvbnNKU0RPTSwgSUZyb21GaWxlT3B0aW9ucyB9XG5cbmltcG9ydCB7IExhenlDb29raWUsIExhenlDb29raWVKYXIgfSBmcm9tICdqc2RvbS1leHRyYSc7XG5leHBvcnQgeyBMYXp5Q29va2llLCBMYXp5Q29va2llSmFyIH1cblxuaW1wb3J0IHsgcGFja09wdGlvbnMgYXMgX3BhY2tPcHRpb25zLCBJT3B0aW9ucywgSU9wdGlvbnNDcmVhdGVRdWVyeSB9IGZyb20gJ2pzZG9tLWV4dHJhJztcbmltcG9ydCB7IG5vcm1hbGl6ZUZyb21VUkxPcHRpb25zLCBub3JtYWxpemVSZXF1ZXN0T3B0aW9ucywgSVJlcXVlc3RPcHRpb25zIH0gZnJvbSAnanNkb20tZXh0cmEvbGliL2Zyb20tdXJsJztcblxuZXhwb3J0IHR5cGUgSU5vdmVsT3B0aW9uc0pTRE9NID0gSUZyb21VcmxPcHRpb25zICYgSU9wdGlvbnNKU0RPTTtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRKU0RPTU9wdGlvbnM6IElGcm9tVXJsT3B0aW9ucyA9IHtcblx0Ly92aXJ0dWFsQ29uc29sZTogbmV3IFZpcnR1YWxDb25zb2xlLFxuXHQvL3J1blNjcmlwdHM6ICdkYW5nZXJvdXNseScsXG5cdGRpc2FibGVDaGVlcmlvOiB0cnVlLFxuXHRtaW5pZnlIVE1MOiB0cnVlLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNKU0RPTTxUID0gSU5vdmVsT3B0aW9uc0pTRE9NPihvcHRpb25zOiBQYXJ0aWFsPFQgJiBJTm92ZWxPcHRpb25zSlNET00+ID0ge30sIC4uLm9wdHM6IElOb3ZlbE9wdGlvbnNKU0RPTVtdKTogUGFydGlhbDxUICYgSU5vdmVsT3B0aW9uc0pTRE9NPlxue1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEpTRE9NT3B0aW9ucywgb3B0aW9ucywgLi4ub3B0cyk7XG5cdC8vIEB0cy1pZ25vcmVcblx0b3B0aW9ucy5jb29raWVKYXIgPSBvcHRpb25zLmNvb2tpZUphciB8fCBuZXcgTGF6eUNvb2tpZUphcigpO1xuXG5cdHJldHVybiBvcHRpb25zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3B0aW9ucyhvcHRpb25zKVxue1xuXHRsZXQgb3B0cyA9IF9wYWNrT3B0aW9ucyhvcHRpb25zLm9wdGlvbnNKU0RPTSB8fCBvcHRpb25zKTtcblxuXHRsZXQgZnJvbVVSTE9wdGlvbnMgPSBub3JtYWxpemVGcm9tVVJMT3B0aW9ucyhvcHRzKTtcblx0bGV0IHJlcXVlc3RPcHRpb25zID0gbm9ybWFsaXplUmVxdWVzdE9wdGlvbnMoZnJvbVVSTE9wdGlvbnMpO1xuXG5cdHJldHVybiB7XG5cdFx0b3B0aW9uczogb3B0cyxcblx0XHRmcm9tVVJMT3B0aW9ucyxcblx0XHRyZXF1ZXN0T3B0aW9ucyxcblx0fVxufVxuIl19